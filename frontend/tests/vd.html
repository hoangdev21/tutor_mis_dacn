<svg viewBox="0 0 800 1800" xmlns="http://www.w3.org/2000/svg">
  <!-- Định nghĩa styles -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowback" markerWidth="10" markerHeight="10" refX="1" refY="3" orient="auto">
      <polygon points="10 0, 0 3, 10 6" fill="#333" />
    </marker>
  </defs>
  
  <!-- Tiêu đề -->
  <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Sơ đồ Quản lý Khu vực và Chỗ đỗ xe</text>
  
  <!-- Actor boxes top -->
  <rect x="50" y="60" width="160" height="60" fill="#f0e6ff" stroke="#b366ff" stroke-width="2" rx="8"/>
  <text x="130" y="95" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Người dùng/Admin</text>
  
  <rect x="590" y="60" width="160" height="60" fill="#e6f7ff" stroke="#66b3ff" stroke-width="2" rx="8"/>
  <text x="670" y="95" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Hệ thống</text>
  
  <!-- Lifelines -->
  <line x1="130" y1="120" x2="130" y2="1700" stroke="#999" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="670" y1="120" x2="670" y2="1700" stroke="#999" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- 1. LẤY DANH SÁCH KHU VỰC -->
  <rect x="70" y="160" width="530" height="50" fill="#fff9e6" stroke="#ffcc66" stroke-width="2" rx="5"/>
  <text x="335" y="190" font-size="15" font-weight="bold" text-anchor="middle" fill="#333">1. Lấy danh sách khu vực</text>
  
  <rect x="120" y="230" width="20" height="150" fill="#e6e6ff" stroke="#6666ff" stroke-width="1"/>
  
  <line x1="140" y1="250" x2="660" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="245" font-size="13" text-anchor="middle" fill="#333">Yêu cầu lấy danh sách khu vực</text>
  
  <rect x="660" y="250" width="20" height="110" fill="#e6f2ff" stroke="#3399ff" stroke-width="1"/>
  
  <path d="M 680 270 L 740 270 L 740 320 L 680 320" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="750" y="280" font-size="12" fill="#666">Truy vấn tất cả</text>
  <text x="750" y="295" font-size="12" fill="#666">khu vực đang hoạt động</text>
  <text x="750" y="310" font-size="12" fill="#666">+ tính chỗ trống</text>
  
  <line x1="660" y1="350" x2="140" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrowback)"/>
  <text x="400" y="345" font-size="13" text-anchor="middle" fill="#333">Trả về danh sách khu vực + chỗ trống</text>
  
  <!-- 2. XEM CHI TIẾT KHU VỰC -->
  <rect x="70" y="410" width="530" height="50" fill="#fff9e6" stroke="#ffcc66" stroke-width="2" rx="5"/>
  <text x="335" y="440" font-size="15" font-weight="bold" text-anchor="middle" fill="#333">2. Xem chi tiết khu vực</text>
  
  <rect x="120" y="480" width="20" height="170" fill="#e6e6ff" stroke="#6666ff" stroke-width="1"/>
  
  <line x1="140" y1="500" x2="660" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="495" font-size="13" text-anchor="middle" fill="#333">Chọn xem chi tiết khu vực</text>
  
  <rect x="660" y="500" width="20" height="130" fill="#e6f2ff" stroke="#3399ff" stroke-width="1"/>
  
  <path d="M 680 520 L 740 520 L 740 585 L 680 585" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="750" y="535" font-size="12" fill="#666">Truy vấn khu vực</text>
  <text x="750" y="550" font-size="12" fill="#666">+ chỗ đỗ trong khu vực</text>
  <text x="750" y="565" font-size="12" fill="#666">Tính trạng thái từng chỗ</text>
  
  <line x1="660" y1="620" x2="140" y2="620" stroke="#333" stroke-width="2" marker-end="url(#arrowback)"/>
  <text x="400" y="615" font-size="13" text-anchor="middle" fill="#333">Hiển thị chi tiết + trạng thái chỗ đỗ</text>
  
  <!-- 3. LẤY CHỖ ĐỖ KHẢ DỤNG -->
  <rect x="70" y="680" width="530" height="50" fill="#e6ffe6" stroke="#66cc66" stroke-width="2" rx="5"/>
  <text x="335" y="710" font-size="15" font-weight="bold" text-anchor="middle" fill="#333">3. Lấy chỗ đỗ khả dụng</text>
  
  <rect x="120" y="750" width="20" height="160" fill="#e6e6ff" stroke="#6666ff" stroke-width="1"/>
  
  <line x1="140" y1="770" x2="660" y2="770" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="765" font-size="13" text-anchor="middle" fill="#333">Yêu cầu danh sách chỗ đỗ trống</text>
  
  <rect x="660" y="770" width="20" height="120" fill="#e6f2ff" stroke="#3399ff" stroke-width="1"/>
  
  <path d="M 680 790 L 740 790 L 740 850 L 680 850" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="750" y="805" font-size="12" fill="#666">Tìm chỗ trống</text>
  <text x="750" y="820" font-size="12" fill="#666">Lọc chỗ chưa có</text>
  <text x="750" y="835" font-size="12" fill="#666">booking xung đột</text>
  
  <line x1="660" y1="880" x2="140" y2="880" stroke="#333" stroke-width="2" marker-end="url(#arrowback)"/>
  <text x="400" y="875" font-size="13" text-anchor="middle" fill="#333">Trả về danh sách chỗ khả dụng</text>
  
  <!-- 4. TÌM KIẾM CHỖ ĐỖ -->
  <rect x="70" y="940" width="530" height="50" fill="#ffe6f0" stroke="#ff66b3" stroke-width="2" rx="5"/>
  <text x="335" y="970" font-size="15" font-weight="bold" text-anchor="middle" fill="#333">4. Tìm kiếm chỗ đỗ</text>
  
  <rect x="120" y="1010" width="20" height="140" fill="#e6e6ff" stroke="#6666ff" stroke-width="1"/>
  
  <line x1="140" y1="1030" x2="660" y2="1030" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="1025" font-size="13" text-anchor="middle" fill="#333">Nhập từ khóa tìm kiếm</text>
  
  <rect x="660" y="1030" width="20" height="100" fill="#e6f2ff" stroke="#3399ff" stroke-width="1"/>
  
  <path d="M 680 1050 L 740 1050 L 740 1095 L 680 1095" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="750" y="1065" font-size="12" fill="#666">Truy vấn theo</text>
  <text x="750" y="1080" font-size="12" fill="#666">từ khóa & bộ lọc</text>
  
  <line x1="660" y1="1120" x2="140" y2="1120" stroke="#333" stroke-width="2" marker-end="url(#arrowback)"/>
  <text x="400" y="1115" font-size="13" text-anchor="middle" fill="#333">Hiển thị kết quả tìm kiếm</text>
  
  <!-- 5. XEM TRẠNG THÁI THEO NGÀY -->
  <rect x="70" y="1180" width="530" height="50" fill="#fff0e6" stroke="#ffb366" stroke-width="2" rx="5"/>
  <text x="335" y="1210" font-size="15" font-weight="bold" text-anchor="middle" fill="#333">5. Xem trạng thái theo ngày</text>
  
  <rect x="120" y="1250" width="20" height="170" fill="#e6e6ff" stroke="#6666ff" stroke-width="1"/>
  
  <line x1="140" y1="1270" x2="660" y2="1270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="1265" font-size="13" text-anchor="middle" fill="#333">Chọn ngày xem trạng thái</text>
  
  <rect x="660" y="1270" width="20" height="130" fill="#e6f2ff" stroke="#3399ff" stroke-width="1"/>
  
  <path d="M 680 1290 L 740 1290 L 740 1360 L 680 1360" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="750" y="1305" font-size="12" fill="#666">Tính trạng thái</text>
  <text x="750" y="1320" font-size="12" fill="#666">tất cả chỗ trong ngày</text>
  <text x="750" y="1335" font-size="12" fill="#666">Gắn trạng thái</text>
  <text x="750" y="1350" font-size="12" fill="#666">lên bản đồ</text>
  
  <line x1="660" y1="1390" x2="140" y2="1390" stroke="#333" stroke-width="2" marker-end="url(#arrowback)"/>
  <text x="400" y="1385" font-size="13" text-anchor="middle" fill="#333">Hiển thị chỗ với trạng thái theo ngày</text>
  
  <!-- Actor boxes bottom -->
  <rect x="50" y="1460" width="160" height="60" fill="#f0e6ff" stroke="#b366ff" stroke-width="2" rx="8"/>
  <text x="130" y="1495" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Người dùng/Admin</text>
  
  <rect x="590" y="1460" width="160" height="60" fill="#e6f7ff" stroke="#66b3ff" stroke-width="2" rx="8"/>
  <text x="670" y="1495" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Hệ thống</text>
  
  <!-- Chú thích -->
  <rect x="50" y="1560" width="700" height="200" fill="#f9f9f9" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="60" y="1585" font-size="13" font-weight="bold" fill="#333">Chú thích:</text>
  
  <text x="60" y="1610" font-size="12" fill="#666">• Lấy danh sách khu vực: Xem tất cả khu vực đỗ xe có trong hệ thống</text>
  <text x="60" y="1630" font-size="12" fill="#666">• Xem chi tiết khu vực: Xem thông tin và các chỗ đỗ cụ thể trong 1 khu vực</text>
  <text x="60" y="1650" font-size="12" fill="#666">• Lấy chỗ đỗ khả dụng: Tìm các chỗ đỗ còn trống, chưa được đặt</text>
  <text x="60" y="1670" font-size="12" fill="#666">• Tìm kiếm chỗ đỗ: Tìm kiếm theo tên, vị trí hoặc đặc điểm</text>
  <text x="60" y="1690" font-size="12" fill="#666">• Xem trạng thái theo ngày: Xem tình trạng đặt chỗ của một ngày cụ thể</text>
  
  <line x1="60" y1="1710" x2="740" y2="1710" stroke="#ccc" stroke-width="1"/>
  <text x="60" y="1735" font-size="11" fill="#999">→ Mũi tên: Yêu cầu/Phản hồi  |  ↻ Vòng quay: Xử lý nội bộ hệ thống</text>
</svg>