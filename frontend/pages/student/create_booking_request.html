<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gửi Yêu Cầu Đặt Lịch - Tutornis</title>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="stylesheet" href="../../assets/css/booking.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <a href="../../index.html">
            <i class="fas fa-graduation-cap"></i>
            Tutornis
          </a>
        </div>
        <nav class="nav">
          <a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
          <a href="find_tutor.html"><i class="fas fa-search"></i> Tìm gia sư</a>
          <a href="booking_requests.html"><i class="fas fa-calendar-alt"></i> Lịch học</a>
          <a href="messages.html"><i class="fas fa-comments"></i> Tin nhắn</a>
        </nav>
        <div class="user-menu">
          <button class="btn-user" id="userMenuBtn">
            <img src="https://ui-avatars.com/api/?name=Student&background=667eea&color=fff" alt="User" id="userAvatar">
            <span id="userName">Student</span>
            <i class="fas fa-chevron-down"></i>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Back Button -->
      <div class="page-header">
        <button class="btn-back" onclick="goBack()">
          <i class="fas fa-arrow-left"></i> Quay lại
        </button>
        <h1 class="page-title">
          <i class="fas fa-paper-plane"></i>
          Gửi Yêu Cầu Đặt Lịch
        </h1>
      </div>

      <div class="booking-layout">
        <!-- Tutor Info Card -->
        <aside class="tutor-info-card">
          <div class="loading-skeleton" id="tutorLoading">
            <div class="skeleton-avatar"></div>
            <div class="skeleton-text"></div>
            <div class="skeleton-text"></div>
          </div>
          <div id="tutorInfoContent" style="display: none;">
            <div class="tutor-avatar">
              <img src="" alt="Tutor" id="tutorAvatar">
            </div>
            <h3 id="tutorName">Gia sư</h3>
            <div class="tutor-rating">
              <div class="stars" id="tutorStars"></div>
              <span id="tutorRating">0.0 (0 đánh giá)</span>
            </div>
            <div class="info-item">
              <i class="fas fa-graduation-cap"></i>
              <span id="tutorEducation">Học vấn</span>
            </div>
            <div class="info-item">
              <i class="fas fa-briefcase"></i>
              <span id="tutorExperience">0 năm kinh nghiệm</span>
            </div>
            <div class="hourly-rate">
              <div class="rate-label">Học phí</div>
              <div class="rate-value" id="tutorRate">0 đ/giờ</div>
            </div>
          </div>
        </aside>

        <!-- Booking Form -->
        <div class="booking-form-container">
          <form id="bookingForm" class="booking-form">
            <!-- Subject Section -->
            <section class="form-section">
              <h2 class="section-title">
                <i class="fas fa-book"></i>
                Môn học
              </h2>
              <div class="form-group">
                <label for="subjectName">Môn học cần học <span class="required">*</span></label>
                <input type="text" id="subjectName" name="subjectName" placeholder="Ví dụ: Toán, Lý, Hóa..." required>
              </div>
              <div class="form-group">
                <label for="subjectLevel">Trình độ <span class="required">*</span></label>
                <select id="subjectLevel" name="subjectLevel" required>
                  <option value="">Chọn trình độ</option>
                  <option value="Tiểu học">Tiểu học</option>
                  <option value="THCS">THCS</option>
                  <option value="THPT">THPT</option>
                  <option value="Đại học">Đại học</option>
                  <option value="Người đi làm">Người đi làm</option>
                  <option value="Khác">Khác</option>
                </select>
              </div>
            </section>

            <!-- Schedule Section -->
            <section class="form-section">
              <h2 class="section-title">
                <i class="fas fa-calendar-alt"></i>
                Lịch học
              </h2>
              <div class="form-row">
                <div class="form-group">
                  <label for="startDate">Ngày bắt đầu <span class="required">*</span></label>
                  <input type="date" id="startDate" name="startDate" required>
                </div>
                <div class="form-group">
                  <label for="preferredTime">Giờ học mong muốn <span class="required">*</span></label>
                  <select id="preferredTime" name="preferredTime" required>
                    <option value="">Chọn giờ học</option>
                    <option value="Sáng (6h-12h)">Sáng (6h-12h)</option>
                    <option value="Chiều (12h-18h)">Chiều (12h-18h)</option>
                    <option value="Tối (18h-22h)">Tối (18h-22h)</option>
                    <option value="Cuối tuần">Cuối tuần</option>
                  </select>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="daysPerWeek">Số buổi/tuần <span class="required">*</span></label>
                  <input type="number" id="daysPerWeek" name="daysPerWeek" min="1" max="7" value="2" required>
                </div>
                <div class="form-group">
                  <label for="hoursPerSession">Số giờ/buổi <span class="required">*</span></label>
                  <input type="number" id="hoursPerSession" name="hoursPerSession" min="1" max="5" step="0.5" value="1.5" required>
                </div>
              </div>
              <div class="form-group">
                <label for="duration">Thời lượng khóa học (tuần) <span class="required">*</span></label>
                <input type="number" id="duration" name="duration" min="1" value="4" required>
              </div>
            </section>

            <!-- Location Section -->
            <section class="form-section">
              <h2 class="section-title">
                <i class="fas fa-map-marker-alt"></i>
                Địa điểm học
              </h2>
              <div class="form-group">
                <label for="locationType">Hình thức dạy học <span class="required">*</span></label>
                <select id="locationType" name="locationType" required>
                  <option value="">Chọn hình thức</option>
                  <option value="online">Dạy online</option>
                  <option value="student_home">Dạy tại nhà học sinh</option>
                  <option value="tutor_home">Dạy tại nhà gia sư</option>
                  <option value="other">Khác</option>
                </select>
              </div>
              <div id="addressFields" style="display: none;">
                <div class="form-group">
                  <label for="address">Địa chỉ</label>
                  <input type="text" id="address" name="address" placeholder="Số nhà, tên đường...">
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="district">Quận/Huyện</label>
                    <input type="text" id="district" name="district" placeholder="Quận/Huyện">
                  </div>
                  <div class="form-group">
                    <label for="city">Thành phố</label>
                    <input type="text" id="city" name="city" placeholder="Thành phố">
                  </div>
                </div>
              </div>
            </section>

            <!-- Description Section -->
            <section class="form-section">
              <h2 class="section-title">
                <i class="fas fa-comment-dots"></i>
                Thông tin thêm
              </h2>
              <div class="form-group">
                <label for="description">Mô tả yêu cầu</label>
                <textarea id="description" name="description" rows="4" placeholder="Mô tả chi tiết yêu cầu của bạn, mục tiêu học tập..."></textarea>
              </div>
              <div class="form-group">
                <label for="studentNote">Ghi chú cho gia sư</label>
                <textarea id="studentNote" name="studentNote" rows="3" placeholder="Những thông tin khác bạn muốn chia sẻ với gia sư..."></textarea>
              </div>
            </section>

            <!-- Summary Section -->
            <section class="form-section summary-section">
              <h2 class="section-title">
                <i class="fas fa-calculator"></i>
                Tổng quan
              </h2>
              <div class="summary-grid">
                <div class="summary-item">
                  <div class="summary-label">Tổng số giờ</div>
                  <div class="summary-value" id="totalHours">0 giờ</div>
                </div>
                <div class="summary-item">
                  <div class="summary-label">Học phí/giờ</div>
                  <div class="summary-value" id="hourlyRateDisplay">0 đ</div>
                </div>
                <div class="summary-item highlight">
                  <div class="summary-label">Tổng chi phí dự kiến</div>
                  <div class="summary-value" id="totalAmount">0 đ</div>
                </div>
              </div>
            </section>

            <!-- Action Buttons -->
            <div class="form-actions">
              <button type="button" class="btn btn-outline" onclick="goBack()">
                <i class="fas fa-times"></i>
                Hủy bỏ
              </button>
              <button type="submit" class="btn btn-primary" id="submitBtn">
                <i class="fas fa-paper-plane"></i>
                Gửi yêu cầu
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- Success Modal -->
  <div id="successModal" class="modal">
    <div class="modal-content success">
      <div class="modal-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2>Gửi yêu cầu thành công!</h2>
      <p>Yêu cầu đặt lịch của bạn đã được gửi đến gia sư. Bạn sẽ nhận được thông báo khi gia sư phản hồi.</p>
      <div class="modal-actions">
        <button class="btn btn-outline" onclick="closeSuccessModal()">
          Đóng
        </button>
        <button class="btn btn-primary" onclick="viewBookingRequests()">
          <i class="fas fa-calendar-alt"></i>
          Xem lịch học
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="../../assets/js/create-booking-request.js"></script>
</body>
</html>
